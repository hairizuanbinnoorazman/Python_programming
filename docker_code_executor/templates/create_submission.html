<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>
<body>

<div class="container">
    <div class="row">
        <h1>Code submission page</h1>
        <form id="form" action="" method="post">
            <div class="form-group row">
                <label for="runtime">Code:</label>
                <select name="runtime" id="runtime">
                    <option value="python:3.12">python:3.12</option>
                </select>
            </div>
            <div class="form-group row">
                <label for="code">Code:</label>
                <textarea style="height:500px;" name="code" id="code"></textarea>
            </div>
            <input id="submit" type="button" name="submit" value="submit">
        </form>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        // click on button submit
        $("#submit").on('click', function(){
            // send ajax
            $.ajax({
                url: 'submissions', // url where to submit the request
                type : "POST", // type of action POST || GET
                dataType : 'json', // data type
                contentType: "application/json",
                data : JSON.stringify({"code":btoa($("#code").val()),"runtime":$("#runtime").val()}), // post data || get data
                success : function(result) {
                    // you can see the result from the console
                    // tab of the developer tools
                    console.log(result);
                    window.location.href = "/submissions";
                },
                error: function(xhr, resp, text) {
                    console.log(xhr, resp, text);
                }
            })
        });
    });

</script>
</body>
</html>